<div class="grid">
	<div class="col-12">
		<div class="card">
			<!-- <h5>Таблица работников</h5> -->
			<!-- <p-table 
			#dt1 
			[value]="employees()" 
			dataKey="id"
			[rows]="employees().length" 
			[loading]="loading" 
			[rowHover]="true" 
			styleClass="p-datatable-gridlines" 
			[paginator]="true" 
			[globalFilterFields]="['name','sirname','age','profession']" 
			responsiveLayout="scroll">
				<ng-template pTemplate="header">
					<tr>
						@for(emp of employeesTableHeaders; track emp.name){
							<th style="min-width: 12rem">
								<div class="flex justify-content-between align-items-center">
									{{emp.name}}
									<p-columnFilter type="text" field="name" display="menu" placeholder="Search by name"></p-columnFilter>
								</div>
							</th>
						}
					</tr>
				</ng-template>
				<ng-template pTemplate="body">
					@for(emp of employees(); track emp.name) {
						<tr>
							<td>
								{{emp.name}}
							</td>
							<td>
								{{emp.sirname}}
							</td>
							<td>
								{{emp.age}}
							</td>
							<td>
								{{emp.profession}}
							</td>
						</tr>
					}

				</ng-template>
			</p-table> -->
		</div>
	</div>

	<button 
		pButton 
		pRipple 
		label="Новая таблица" 
		class="p-button"
    (click)="newTable()"
    >
	</button>

  <button 
		pButton 
		pRipple 
		label="Добавить строку" 
		class="p-button"
    (click)="tableModel.addRow()"
    >
	</button>

  <button 
		pButton 
		pRipple 
		label="Добавить колонку" 
		class="p-button"
    (click)="tableModel.addColumn()"
    >
	</button>

  @if(tableModel) {
    <div class="col-12">
      <div class="card">
        <p-table 
          #dt1 
          [value]="tableModel.tbody()" 
          dataKey="1"
          [rows]="tableModel.length" 
          [loading]="loading" 
          [rowHover]="true" 
          styleClass="p-datatable-gridlines" 
          [globalFilterFields]="tableModel.theadValues" 
          responsiveLayout="scroll">
            <ng-template pTemplate="header">
              <tr>
                @for(th of tableModel.theadValues; track $index){
                  <th style="min-width: 12rem">
                    <div class="flex justify-content-between align-items-center">
                      {{th}}
                      <p-columnFilter type="text" field="name" display="menu" placeholder="Search by name"></p-columnFilter>
                    </div>
                  </th>
                }
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-row>
                <tr>
                  @for(key of tableModel.theadKeys; track $index) {
                    <td>
                      <input type="text" [(ngModel)]="row[key]">
                    </td>
                  }
                </tr>

            </ng-template>
        </p-table>
      </div>
    </div>
  }
</div>
